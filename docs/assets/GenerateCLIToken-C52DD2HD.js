import{cU as p,o as x,r as c,j as e,L as f,F as l,i as j,cV as b,l as T,T as w,aZ as I}from"./index-6IovgF0W.js";import{u as v}from"./useMutation-WxmkvIM8.js";import{d as y}from"./dayjs.min-CPCXU5l2.js";import{d as A}from"./duration-DEJQFO4t.js";import{R as E}from"./index-CMY6wL_F.js";(function(){try{var s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},n=new s.Error().stack;n&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[n]="98f5da0d-d6fc-444f-9d71-100a48efd88f",s._sentryDebugIdIdentifier="sentry-dbid-98f5da0d-d6fc-444f-9d71-100a48efd88f")}catch{}})();y.extend(A);const{Content:k}=f,{Title:C,Paragraph:F,Text:u}=w,R=()=>{const[s]=p(),{message:n}=x.useApp(),[o,h]=c.useState(null),{mutate:i,isPending:m,isError:g}=v({mutationFn:I,onSuccess:t=>{var a,r,d;(a=t==null?void 0:t.data)!=null&&a.accessKey&&h((d=(r=t==null?void 0:t.data)==null?void 0:r.accessKey)==null?void 0:d.name)},onError:t=>{var a;n.open({type:"error",content:((a=t==null?void 0:t.response)==null?void 0:a.data)||"Couldn't create new access key"})}});return c.useEffect(()=>{const t=s.get("hostname");if(t){const a=y.duration(60,"days").asMilliseconds();i({friendlyName:t,ttl:a})}},[i,s]),e.jsx(f,{children:e.jsx(k,{children:e.jsxs(l,{justify:"center",align:"center",style:{height:"100vh"},vertical:!0,children:[e.jsx(j,{loading:m,children:g||!s.get("hostname")?e.jsx(E,{status:"error",title:"Authentication Failed",subTitle:"Try again or contact our support: support@revopush.org"}):e.jsxs(l,{justify:"center",align:"start",vertical:!0,children:[e.jsx(C,{level:2,style:{marginBottom:0,marginTop:0},children:"Authentication succeeded"}),e.jsx("br",{}),e.jsx(u,{children:"Please copy and paste this token to the command window:"}),e.jsx("br",{}),e.jsx(F,{code:!0,copyable:{icon:e.jsx(b,{style:{fontSize:18,marginLeft:10}})},style:{fontSize:22},children:o}),e.jsx(u,{children:"After doing so, please close this browser tab."})]})}),e.jsx(T,{})]})})})};export{R as default};
//# sourceMappingURL=GenerateCLIToken-C52DD2HD.js.map
