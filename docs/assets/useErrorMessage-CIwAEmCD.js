var S=s=>{throw TypeError(s)};var w=(s,t,e)=>t.has(s)||S("Cannot "+e);var n=(s,t,e)=>(w(s,t,"read from private field"),e?e.call(s):t.get(s)),f=(s,t,e)=>t.has(s)?S("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),y=(s,t,e,i)=>(w(s,t,"write to private field"),i?i.call(s,e):t.set(s,e),e),g=(s,t,e)=>(w(s,t,"access private method"),e);import{c4 as A,cI as D,cJ as x,cK as R,c5 as K,c8 as k,r as m,ce as U,cL as _,p as L}from"./index-Dzs6o6Dg.js";(function(){try{var s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new s.Error().stack;t&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[t]="5c8ec870-b6bd-43e7-9d3d-b44380e87582",s._sentryDebugIdIdentifier="sentry-dbid-5c8ec870-b6bd-43e7-9d3d-b44380e87582")}catch{}})();var d,c,a,h,r,M,E,I,T=(I=class extends A{constructor(t,e){super();f(this,r);f(this,d);f(this,c);f(this,a);f(this,h);y(this,d,t),this.setOptions(e),this.bindMethods(),g(this,r,M).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var i;const e=this.options;this.options=n(this,d).defaultMutationOptions(t),D(this.options,e)||n(this,d).getMutationCache().notify({type:"observerOptionsUpdated",mutation:n(this,a),observer:this}),e!=null&&e.mutationKey&&this.options.mutationKey&&x(e.mutationKey)!==x(this.options.mutationKey)?this.reset():((i=n(this,a))==null?void 0:i.state.status)==="pending"&&n(this,a).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=n(this,a))==null||t.removeObserver(this)}onMutationUpdate(t){g(this,r,M).call(this),g(this,r,E).call(this,t)}getCurrentResult(){return n(this,c)}reset(){var t;(t=n(this,a))==null||t.removeObserver(this),y(this,a,void 0),g(this,r,M).call(this),g(this,r,E).call(this)}mutate(t,e){var i;return y(this,h,e),(i=n(this,a))==null||i.removeObserver(this),y(this,a,n(this,d).getMutationCache().build(n(this,d),this.options)),n(this,a).addObserver(this),n(this,a).execute(t)}},d=new WeakMap,c=new WeakMap,a=new WeakMap,h=new WeakMap,r=new WeakSet,M=function(){var e;const t=((e=n(this,a))==null?void 0:e.state)??R();y(this,c,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},E=function(t){K.batch(()=>{var e,i,u,l,o,p,v,C;if(n(this,h)&&this.hasListeners()){const b=n(this,c).variables,O=n(this,c).context;(t==null?void 0:t.type)==="success"?((i=(e=n(this,h)).onSuccess)==null||i.call(e,t.data,b,O),(l=(u=n(this,h)).onSettled)==null||l.call(u,t.data,null,b,O)):(t==null?void 0:t.type)==="error"&&((p=(o=n(this,h)).onError)==null||p.call(o,t.error,b,O),(C=(v=n(this,h)).onSettled)==null||C.call(v,void 0,t.error,b,O))}this.listeners.forEach(b=>{b(n(this,c))})})},I);function $(s,t){const e=k(),[i]=m.useState(()=>new T(e,s));m.useEffect(()=>{i.setOptions(s)},[i,s]);const u=m.useSyncExternalStore(m.useCallback(o=>i.subscribe(K.batchCalls(o)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),l=m.useCallback((o,p)=>{i.mutate(o,p).catch(U)},[i]);if(u.error&&_(i.options.throwOnError,[u.error]))throw u.error;return{...u,mutate:l,mutateAsync:u.mutate}}const j=s=>{var t,e,i,u,l;if((t=s==null?void 0:s.response)!=null&&t.data){if(typeof((e=s==null?void 0:s.response)==null?void 0:e.data)=="string")return(i=s==null?void 0:s.response)==null?void 0:i.data;if(Array.isArray((u=s==null?void 0:s.response)==null?void 0:u.data))return(l=s==null?void 0:s.response)==null?void 0:l.data.map(o=>{const p=o.field||"Unknown Field",v=o.message||"No error message provided";return`Field "${p}": ${v}`}).join("; ")}},J=()=>{const{message:s}=L.useApp();return(t,e)=>{s.open({type:"error",duration:5,content:j(t)||e})}};export{$ as a,J as u};
//# sourceMappingURL=useErrorMessage-CIwAEmCD.js.map
